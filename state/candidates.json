{
  "active_edge": "Cycle 36: Prove valuationRingAt = range(algebraMap from Localization.AtPrime)",
  "cycle_36_results": {
    "goal": "Set equality via subset in both directions",
    "status": "PROGRESS",
    "proved_count": 5,
    "sorry_count": 3,
    "candidates": [
      {
        "name": "localRing_maximalIdeal_eq_map'",
        "type": "PROVE",
        "status": "PROVED",
        "score": "3/5",
        "notes": "Wrapper for Cycle 33 lemma"
      },
      {
        "name": "valuationRingAt_eq_localization_valuationRing",
        "type": "PROVE",
        "status": "PROVED",
        "score": "3/5",
        "notes": "Definitional equality (rfl)"
      },
      {
        "name": "algebraMap_localization_mk'_eq_div'",
        "type": "PROVE",
        "status": "PROVED",
        "score": "5/5",
        "notes": "KEY: mk' → r/s division in K"
      },
      {
        "name": "valuation_eq_intValuation_extendToLocalization",
        "type": "PROVE",
        "status": "PROVED",
        "score": "3/5",
        "notes": "Definition unwrapping (rfl)"
      },
      {
        "name": "range_algebraMap_subset_valuationRingAt",
        "type": "PROVE",
        "status": "PROVED",
        "score": "5/5",
        "notes": "KEY: Forward direction PROVED!"
      },
      {
        "name": "valuationRingAt_subset_range_algebraMap",
        "type": "PROVE",
        "status": "SORRY",
        "score": "5/5",
        "notes": "KEY BLOCKER: Converse direction"
      },
      {
        "name": "valuationSubring_eq_localization_image'",
        "type": "PROVE",
        "status": "SORRY",
        "score": "5/5",
        "notes": "Set equality (depends on converse)"
      },
      {
        "name": "exists_coprime_rep_via_set_eq",
        "type": "PROVE",
        "status": "SORRY",
        "score": "5/5",
        "notes": "Main target (depends on set equality)"
      }
    ],
    "key_insight": "Forward direction range(algebraMap) ⊆ valuationRingAt is now PROVED. The proof uses IsLocalization.surj + algebraMap_localization_mk'_eq_div' + mk_mem_valuationRingAt. Single blocker is the converse direction."
  },
  "cycle_37_plan": {
    "goal": "Prove valuationRingAt_subset_range_algebraMap",
    "tasks": [
      "Prove converse: v(g) ≤ 1 implies g ∈ range(algebraMap from Loc.AtPrime)",
      "Complete valuationSubring_eq_localization_image'",
      "Cascade to exists_coprime_rep_via_set_eq",
      "Complete valuationRingAt_equiv_localization"
    ],
    "approach": "Use DVR uniformizer factorization (Cycle 34) or IsFractionRing surjectivity. Write g = a/b as fraction, then analyze cases based on whether b ∈ v.asIdeal.",
    "key_lemmas_needed": [
      "valuationRingAt_subset_range_algebraMap: converse direction",
      "Possibly need uniformizer_factorization from Cycle 34"
    ],
    "fallback": "Use DVR structure directly: Localization.AtPrime is DVR with fraction field K. Elements with valuation ≤ 1 are in the DVR by definition."
  },
  "architecture": {
    "forward_direction_proved": [
      "mk_mem_valuationRingAt: fractions r/s with s ∉ v.asIdeal have v ≤ 1 (Cycle 33)",
      "algebraMap_localization_mk'_eq_div': mk' → r/s in K (Cycle 36)",
      "range_algebraMap_subset_valuationRingAt: forward inclusion (Cycle 36)"
    ],
    "converse_blocked": [
      "valuationRingAt_subset_range_algebraMap: v(g) ≤ 1 → g from localization (BLOCKER)",
      "valuationSubring_eq_localization_image': set equality (BLOCKED)",
      "exists_coprime_rep_via_set_eq: coprime representation (BLOCKED)"
    ]
  },
  "remaining_sorries": {
    "active": [
      {
        "name": "valuationRingAt_subset_range_algebraMap",
        "line": 2099,
        "status": "KEY BLOCKER",
        "notes": "Converse direction"
      }
    ],
    "proved_cycle_36": [
      {
        "name": "localRing_maximalIdeal_eq_map'",
        "line": 2023,
        "notes": "wrapper"
      },
      {
        "name": "valuationRingAt_eq_localization_valuationRing",
        "line": 2031,
        "notes": "rfl"
      },
      {
        "name": "algebraMap_localization_mk'_eq_div'",
        "line": 2041,
        "notes": "KEY: mk' → division"
      },
      {
        "name": "valuation_eq_intValuation_extendToLocalization",
        "line": 2064,
        "notes": "rfl"
      },
      {
        "name": "range_algebraMap_subset_valuationRingAt",
        "line": 2070,
        "notes": "KEY: forward direction"
      }
    ]
  }
}
